#!/bin/sh
#
prog=installsm
usage=$prog
#
#	Install the slowmovie software on Raspberry Pi running Debian,
#	FreeBSD machines, and MacOS.

BIN=$HOME/bin

if [ ! -d $BIN ]
then
	mkdir -p ${BIN}	|| exit 1
fi

for p in ffmpeg xloadimage
do
	if [ ! -n `which $p` ]
	then
		case `uname` in
		Linux)
			sudo apt-get install -y $p	|| exit 10;;
		FreeBSD)
			sudo sudo pkg -y install $p;;
		Darwin)
			# stub
			;;
		esac
	fi
done

progs="addsm updatesm playsm slowdefs"

for i in $progs
do
	if [ ! -s $BIN/$i -o $i -nt $BIN/$i ]
	then
		cp $i $BIN/$i	|| exit 2
	fi
done

. slowdefs

mkdir -p $MOVIE_LIB/catalog	|| exit 3
