#!/bin/sh
#
prog=install_slowmovie_client
usage="$prog"
#
#	Copy this file into the client home directory (probably user "pi"
#	on Raspberry Pi-s and execute it.  It can be restarted and will not
#	redo all the steps that have worked so far.
#
#	We use sudo a lot.

export	TMPDIR=${TMPDIR:=/tmp}

sudo apt-get update
sudo apt-get upgrade -y
sudo apt-get install -y lightdm

# XXX do raspi-conf stuff.

mkdir -p bin lib slowmovie >/dev/null	|| exit 1

cd src
if [ ! -d slowmovies ]
then
	case `which git` in
	"")	sudo apt-get install -y git
	esac

	git clone https://github.com/wcheswick/slowmovies || exit 2
fi


case `which pnmscale` in
"")	sudo apt-get install -y netpbm
esac

case `which display` in
"")	sudo apt-get install -y imagemagick
esac
